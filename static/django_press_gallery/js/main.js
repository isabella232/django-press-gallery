// Generated by CoffeeScript 1.6.2
(function() {
  var get_url_parameter;

  get_url_parameter = function(name) {
    return decodeURIComponent((RegExp(name + '=' + '(.+?)(&|$)').exec(location.search) || [null, null])[1]);
  };

  $(function() {
    return $('#login_form').on('submit', function(e) {
      var $form, data, url;

      e.preventDefault();
      $form = $(this);
      url = location.pathname;
      data = $form.serialize();
      return $.post(url, data, function(res) {
        var next;

        next = get_url_parameter('next');
        if (next === 'null') {
          next = '/pressphotos';
        }
        return window.location.replace(next);
      }).error(function(xhr, textStatus, errorThrown) {
        if (xhr.status === 400) {
          return $form.find('.error_message').show();
        }
      });
    });
  });

}).call(this);
